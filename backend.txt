ì•„ì´ëŒ ë•ì§ˆ ê²Œì‹œíŒ (ì‚¬ëŒë“¤ì´ íšŒì›ì„ ê°€ì…í•˜ê³ , ë¡œê·¸ì¸ í•œ í›„ ì•„ì´ëŒ ì‚¬ì§„ì„ ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ê²Œì‹œíŒì„ ë§Œë“¤ì?)


# í™ˆí˜ì´ì§€ ëª¨ì–‘ êµ¬ìƒ 

<Header>
ê²Œì‹œíŒ, ë¡œê·¸ì¸, íšŒì›ê°€ì…
ì™¼ìª½ ì •ë ¬

<body>
ê²Œì‹œê¸€ ì‘ì„± ë²„íŠ¼
ê²Œì‹œê¸€(ì‘ì„±ì, ì´ë¯¸ì§€, ì„¤ëª…, ì‚­ì œ, ìˆ˜ì •)
ê°€ìš´ë° ì •ë ¬, 400x400 í¬ê¸°
1ì—´ë¡œ ë‚´ë¦¼ì°¨ìˆœ

<footer>
ì œì‘íŒ€, ì œì‘ì ì´ë¦„


# ë°ì´í„°ë² ì´ìŠ¤ë§Œë“¤ê¸°
post table ( id, title, pictur, comleted, created_at, updated_at, user_id)
user table(id, user_name, password, email)







# mysqlì˜ í…Œì´ë¸” â€¨from sqlalchemy import Column, Integer, String, Boolean, DateTime â€¨from sqlalchemy.sql import func â€¨from database import Base  â€¨â€¨
class Todo(Base): â€¨__tablename__ = "todos"  â€¨id = Column(Integer, primary_key=True, index=True, autoincrement=True) â€¨title = Column(String(200), nullable=False, index=True) 
description = Column(String(500), nullable=True) â€¨completed = Column(Boolean, default=False, nullable=False) â€¨created_at = Column(DateTime(timezone=True), â€¨
server_default=func.now()) â€¨updated_at = Column(DateTime(timezone=True), onupdate=func.now())  â€¨â€¨def __repr__(self): return f"<Todo(id={self.id}, title='{self.title}', completed={self.completed})>" 

â€¨ ------------------------------------------------------------------ â€¨
  ìƒê¸° ëª¨ë¸ì„    post table ( id, title, pictur, comleted, created_at, updated_at, user_id)  â€¨user table(id, user_name, password, email)  ë‘ ê°€ì§€ í…Œì´ë¸”ë¡œ ë‚˜ëˆ„ì–´ì„œ ëª¨ë¸ì„ ë§Œë“¤ê³  ì‹¶ê³ , â€¨
  ì´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì—°ê²°í•  ì½”ë“œë¥¼ ì‘ì„±í•´ì¤˜.â€¨
  ------------------------------------------------------------------
  
ë°±ì—”ë“œ ê¸°ë³¸êµ¬ì¡°
backend/
 â”œâ”€â”€ database.py   ğŸ‘ˆ DB ì—°ê²° ì„¸íŒ…
 â”œâ”€â”€ models.py     ğŸ‘ˆ User, Post ëª¨ë¸ ì •ì˜
 â”œâ”€â”€ main.py       ğŸ‘ˆ ì‹¤í–‰ ì§„ì…ì  (í…Œì´ë¸” ìƒì„±)
 â””â”€â”€ requirements.txt

------------------------------------------------------------------
ë°ì´í„°ë² ì´ìŠ¤.py

# database.py
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

# MySQL ì—°ê²° URL (ë³¸ì¸ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •)
DATABASE_URL = "mysql+pymysql://root:ë¹„ë°€ë²ˆí˜¸@localhost:3306/idol_board"

engine = create_engine(DATABASE_URL, echo=True)

SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

Base = declarative_base()

------------------------------------------------------------------
ëª¨ë¸.py 
# models.py
from sqlalchemy import Column, Integer, String, Boolean, DateTime, ForeignKey
from sqlalchemy.sql import func
from sqlalchemy.orm import relationship
from database import Base

# --------------------------
# User í…Œì´ë¸”
# --------------------------
class User(Base):
    __tablename__ = "users"

    id = Column(Integer, primary_key=True, index=True, autoincrement=True)
    user_name = Column(String(50), nullable=False, unique=True, index=True)
    password = Column(String(255), nullable=False)
    email = Column(String(100), nullable=False, unique=True, index=True)
    created_at = Column(DateTime(timezone=True), server_default=func.now())

    # ê´€ê³„ ì„¤ì • (1:N)
    posts = relationship("Post", back_populates="user")

    def __repr__(self):
        return f"<User(id={self.id}, user_name='{self.user_name}', email='{self.email}')>"

# --------------------------
# Post í…Œì´ë¸”
# --------------------------
class Post(Base):
    __tablename__ = "posts"

    id = Column(Integer, primary_key=True, index=True, autoincrement=True)
    title = Column(String(200), nullable=False, index=True)
    picture = Column(String(500), nullable=True)  # ì´ë¯¸ì§€ ê²½ë¡œë‚˜ URL
    completed = Column(Boolean, default=False, nullable=False)
    created_at = Column(DateTime(timezone=True), server_default=func.now())
    updated_at = Column(DateTime(timezone=True),
                        server_default=func.now(),
                        onupdate=func.now())
    user_id = Column(Integer, ForeignKey("users.id"), nullable=False)

    # ê´€ê³„ ì„¤ì • (N:1)
    user = relationship("User", back_populates="posts")

    def __repr__(self):
        return f"<Post(id={self.id}, title='{self.title}', user_id={self.user_id})>"

------------------------------------------------------------------
ë©”ì¸.py
from fastapi import FastAPI, Depends, HTTPException, status
from fastapi.middleware.cors import CORSMiddleware
from sqlalchemy.orm import Session
from typing import List

import models, schemas
from database import engine, get_db

# DB í…Œì´ë¸” ìƒì„±
models.Base.metadata.create_all(bind=engine)

app = FastAPI(
    title="Idol Board API",
    description="ì•„ì´ëŒ ë•ì§ˆ ê²Œì‹œíŒ ë°±ì—”ë“œ",
    version="1.0.0"
)

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:5173"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸
@app.get("/")
async def root():
    return {"message": "ì•„ì´ëŒ ë•ì§ˆ ê²Œì‹œíŒ API ì„œë²„ ì‹¤í–‰ ì¤‘!"}

# ---------------------------
# Users ì—”ë“œí¬ì¸íŠ¸
# ---------------------------
@app.post("/users", response_model=schemas.UserResponse)
def create_user(user: schemas.UserCreate, db: Session = Depends(get_db)):
    db_user = models.User(**user.dict())
    db.add(db_user)
    db.commit()
    db.refresh(db_user)
    return db_user

@app.get("/users", response_model=List[schemas.UserResponse])
def get_users(db: Session = Depends(get_db)):
    return db.query(models.User).all()

# ---------------------------
# Posts ì—”ë“œí¬ì¸íŠ¸
# ---------------------------
@app.post("/posts", response_model=schemas.PostResponse)
def create_post(post: schemas.PostCreate, db: Session = Depends(get_db)):
    db_post = models.Post(**post.dict())
    db.add(db_post)
    db.commit()
    db.refresh(db_post)
    return db_post

@app.get("/posts", response_model=List[schemas.PostResponse])
def get_posts(db: Session = Depends(get_db)):
    return db.query(models.Post).all()

â€¨
